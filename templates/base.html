<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Kopsis Supe{% endblock %}</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Flowbite CSS & JS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

    <!-- Tema kontrolü -->
    <script>
    if (
      localStorage.getItem('color-theme') === 'dark' ||
      (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100">

    <!-- Navbar -->
    <nav class="bg-gray-900 text-white px-4 py-3">
        <div class="flex justify-between items-center max-w-6xl mx-auto">
            <a href="/" class="text-xl font-bold">Kopsis Supe</a>
            <div class="flex items-center gap-4">
                <a href="/" class="{% if request.path == '/' %}underline{% endif %}">Ana Sayfa</a>
                {% if user.is_authenticated %}
                    <a href="/admin/">Yönetim</a>
                    <span>Hoş geldin, {{ user.username }}!</span>
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="text-red-300 hover:text-red-500">Çıkış</button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" class="{% if request.path == '/accounts/login/' %}underline{% endif %}">Giriş</a>
                    <a href="{% url 'register' %}" class="{% if request.path == '/accounts/register/' %}underline{% endif %}">Kayıt</a>
                {% endif %}
                <!-- Tema geçiş butonu -->
                <button id="theme-toggle" type="button" class="text-white hover:text-yellow-300">🌞 / 🌙</button>
            </div>
        </div>
    </nav>

    <!-- İçerik -->
    <main class="max-w-6xl mx-auto p-4">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-4">
        © 2025 Kopsis Supe
    </footer>


    {% if messages %}
<script>
  {% for message in messages %}
    showToast("{{ message|escapejs }}");
  {% endfor %}
</script>
{% endif %}

<script>
function showToast(message = "İşlem tamamlandı") {
  const toast = document.createElement("div");
  toast.className = "fixed bottom-5 right-5 z-50 flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800";
  toast.innerHTML = `
    <div class="inline-flex items-center justify-center w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200">✅</div>
    <div class="ms-3 text-sm font-normal">${message}</div>
    <button type="button" class="ms-auto text-gray-400 hover:text-gray-900 dark:hover:text-white" onclick="this.parentElement.remove()">✖️</button>
  `;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 4000);
}
</script>
    <!-- Tema geçiş JS -->
    <script>
    const themeToggleBtn = document.getElementById('theme-toggle');
    themeToggleBtn.addEventListener('click', () => {
        const html = document.documentElement;
        if (html.classList.contains('dark')) {
            html.classList.remove('dark');
            localStorage.setItem('color-theme', 'light');
        } else {
            html.classList.add('dark');
            localStorage.setItem('color-theme', 'dark');
        }
    });
    </script>
</body>
</html>
